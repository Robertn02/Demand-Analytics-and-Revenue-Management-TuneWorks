# TuneWorks — Data Dictionary

> This README documents the schema used in the **“Demand Analytics and Revenue Management — TuneWorks”** project.  
> Format: GitHub-Flavored Markdown (tables supported).

<details>
  <summary><strong>Table of Contents</strong></summary>

- [Conventions](#conventions)
- [agents](#agents--entertainer-agent-information)
- [engagements](#engagements--event-bookings-customer--entertainer)
- [entertainers](#entertainers--entertainer-master-data)
- [entertainer_styles](#entertainer_styles--mapping-entertainer--musical-style)
- [musical_styles](#musical_styles--musical-style-reference)
- [musical_preferences](#musical_preferences--customer-style-preferences)
- [customers](#customers--customer-master-data)
- [entertainer_members](#entertainer_members--mapping-entertainer--member)
- [members](#members--individual-members-eg-band-members)
- [ztbl*](#ztbl--calendarlabel-reference-tables-prefix-family)
- [Open Questions](#open-questions-to-clarify-with-data-owner)
- [Data Quality Notes](#data-quality-notes-initial)
- [Quick Links](#quick-links-suggested-readme-section)
</details>

---

## Conventions

- Table names use `snake_case`  
- Primary keys (PK) end with `_id`; foreign keys (FK) reference the PK of another table  
- Data types: `int`, `numeric(… )`, `date`, `time`, `timestamp`, `text`, `char`

---

## `agents` — entertainer agent information
| Column | Type | Description | Notes |
|---|---|---|---|
| `agent_id` | int (PK) | Unique agent identifier |  |
| `agt_first_name` | text | First name |  |
| `agt_last_name` | text | Last name |  |
| `agt_street_address` | text | Street address |  |
| `agt_city` | text | City |  |
| `agt_state` | text | State (abbr) |  |
| `agt_zip_code` | text | ZIP/postal code | store as text to preserve leading zeros |
| `agt_phone_number` | text | Phone number | store as text (formatting) |
| `date_hired` | date | Hire date |  |
| `salary` | numeric(12,2) | Annual base salary (USD) | **Anomaly:** Agent 9 shows “50” → likely data error |
| `commission_rate` | numeric(5,4) | Commission rate (0–1) | confirm range & caps |

---

## `engagements` — event bookings (customer ↔ entertainer)
| Column | Type | Description | Notes |
|---|---|---|---|
| `engagement_id` | int (PK) | Unique engagement identifier | **DQ:** exported counts appear inconsistent; re-verify extract |
| `start_date` | date | Event start date |  |
| `end_date` | date | Event end date | enforce `start_date ≤ end_date` |
| `start_time` | time | Start time | if stored as datetime, normalize |
| `stop_time` | time | End time |  |
| `contract_price` | numeric(12,2) | Flat contract price (USD) | non-negative |
| `customer_id` | int (FK → `customers.customer_id`) | Customer |  |
| `agent_id` | int (FK → `agents.agent_id`) | Handling agent | confirm mapping consistency |
| `entertainer_id` | int (FK → `entertainers.entertainer_id`) | Entertainer |  |

---

## `entertainers` — entertainer master data
| Column | Type | Description | Notes |
|---|---|---|---|
| `entertainer_id` | int (PK) | Unique entertainer |  |
| `ent_stage_name` | text | Stage name |  |
| `ent_ssn` | char(11) | SSN `XXX-XX-XXXX` | **PII:** restrict access |
| `ent_street_address` | text | Address |  |
| `ent_city` | text | City |  |
| `ent_state` | text | State (abbr) |  |
| `ent_zip_code` | text | ZIP/postal code | keep as text |
| `ent_phone_number` | text | Phone number | keep as text |
| `ent_web_page` | text | Website URL | nullable |
| `ent_email_address` | text | Email | nullable |
| `date_entered` | date | Date joined company |  |

---

## `entertainer_styles` — mapping: entertainer ↔ musical style
| Column | Type | Description | Notes |
|---|---|---|---|
| `entertainer_id` | int (FK) | Entertainer | many-to-many |
| `style_id` | int (FK) | Musical style |  |
| `style_strength` | int | Strength 1–3 | **Open Q:** is 1 strongest or weakest? |

---

## `musical_styles` — musical style reference
| Column | Type | Description | Notes |
|---|---|---|---|
| `style_id` | int (PK) | Unique style |  |
| `style_name` | text | Style name | controlled vocabulary |

---

## `musical_preferences` — customer style preferences
| Column | Type | Description | Notes |
|---|---|---|---|
| `customer_id` | int (FK) | Customer |  |
| `style_id` | int (FK) | Musical style |  |
| `preference_sequence` | int | Rank 1–3 | **Open Q:** direction vs `style_strength`? |

---

## `customers` — customer master data
| Column | Type | Description | Notes |
|---|---|---|---|
| `customer_id` | int (PK) | Unique customer |  |
| `cust_first_name` | text | First name |  |
| `cust_last_name` | text | Last name |  |
| `cust_street_address` | text | Address |  |
| `cust_city` | text | City |  |
| `cust_state` | text | State (abbr) |  |
| `cust_zip_code` | text | ZIP/postal code | keep as text |
| `cust_phone_number` | text | Phone number | keep as text |

---

## `entertainer_members` — mapping: entertainer ↔ member
| Column | Type | Description | Notes |
|---|---|---|---|
| `entertainer_id` | int (FK) | Entertainer | one-to-many from entertainer |
| `member_id` | int (FK) | Member |  |
| `status` | text | Relationship/status | **Open Q:** allowed values & meaning |

---

## `members` — individual members (e.g., band members)
| Column | Type | Description | Notes |
|---|---|---|---|
| `member_id` | int (PK) | Unique member |  |
| `mbr_first_name` | text | First name |  |
| `mbr_last_name` | text | Last name |  |
| `mbr_phone_number` | text | Phone number | keep as text |
| `gender` | char(1) | `F` or `M` | **DQ:** one `NULL` present |

---

## `ztbl*` — calendar/label reference tables (prefix family)
| Table | Columns (examples) | Purpose | Notes |
|---|---|---|---|
| `ztblmonths` | `month_start`, `month_end`, `month_year`, `year_number`, `month_number` | Month bucketing for trends | used in monthly metrics |
| `ztbldays`, `ztblweeks` | calendar fields | Day/week bucketing | confirm join keys |
| `ztbl_ski_labels` *(name uncertain)* | `label_count` (1–60) | Unknown label mapping | **Open Q:** define semantics |

---

## Open Questions (to clarify with data owner)
1. Are lower numbers stronger or weaker for `style_strength` and `preference_sequence`?  
2. Why do exported `engagement_id` counts appear inconsistent? Can we re-extract and provide a schema spec?  
3. Is **Agent 9 salary = “50”** a unit issue ($50 vs $50,000) or placeholder?  
4. What are the valid values and definitions for `entertainer_members.status`?  
5. What is the intended use of `ztbl*` tables, especially the meaning of `label_count`?  
6. Are `start_time` / `stop_time` in local time or UTC? Any timezone standard?

---

## Data Quality Notes (initial)
- **Keys & FKs:** enforce PK uniqueness; check for orphan FKs in `engagements`, `entertainer_styles`, `musical_preferences`, `entertainer_members`.  
- **Phone/ZIP:** store as `text` to preserve formatting; validate via regex, not numeric ranges.  
- **Money fields:** ensure non-negative values and a single currency (USD).  
- **Dates:** enforce `start_date ≤ end_date`; prevent negative durations.  
- **PII:** restrict access to `ent_ssn`; exclude from analytics exports where possible.

---

## Quick Links (suggested README section)
- 🗂 **Schema ERD:** `docs/erd.png`  
- 🧹 **Cleaning Log:** `docs/cleaning_log.md`  
- ❓ **Questions for Client:** `docs/open_questions.md`  
- 📊 **Analysis SQL:** `sql/tuneworks_demand_revenue_analysis.sql`
